---
import { PortableText } from "astro-portabletext";
import StripPTag from "./StripPTag.astro";
import type { PortableText as PortableTextType } from "@/lib/schemas/page";
import type { SemanticLevel } from "@/lib/types";

interface Props {
  text: PortableTextType;
  semanticLevel?: SemanticLevel;
}

const { text, semanticLevel = "h2" } = Astro.props;

// Custom component to render normal blocks as fragments instead of <p> tags
const customComponents = {
  block: {
    normal: StripPTag,
  },
};

const Tag = semanticLevel;
---

{
  /* no newline to avoid white space in heading tag */
  /* prettier-ignore */
  text?.length > 0 && (<Tag><PortableText value={text} components={customComponents} /></Tag>)
}
